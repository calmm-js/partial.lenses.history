!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("infestines"),require("partial.lenses")):"function"==typeof define&&define.amd?define(["exports","infestines","partial.lenses"],e):e(n.H={},n.I,n.L)}(this,function(n,e,t){"use strict";function r(n,t){var r=t.v,c=t.i,f=t.c;if(f.e&&e.acyclicEqualsU(u(c,r),n))return t;var s=t.t,a=Date.now(),l=c+(f.p<=a-u(c,s)),p=Math.max(0,l-f.m);return d(l-p,i(a,o(p,l,s)),i(n,o(p,l,r)),f)}var u=function(n,e){return e[n]},i=function(n,e){return e.concat([n])},o=function(n,e,t){return 0===n&&f(t)===e?t:t.slice(n,e)},c=function(n,e){return o(n,f(e),e)},f=function(n){return n.length},s=function(n,e){return o(0,n,e)},a=function(n){return[n]},d=function(n,e,t,r){return{i:n,t:e,v:t,c:r}},l=function(n,e){return d(Math.max(0,Math.min(n,x(e)-1)),e.t,e.v,e.c)},p=e.curry(function(n,e){return l(e.i+n,e)}),v=e.curryN(2,function(n){var e={p:(n=n||0).replacePeriod||0,e:!n.pushEquals,m:Math.max(1,n.maxCount||-1>>>1)-1};return function(n){return d(0,a(Date.now()),a(n),e)}}),x=function(n){return f(n.v)},m=function(n){return n.i},y=e.curry(l),h=t.lens(m,l),M=function(n){return u(n.i,n.v)},q=e.curry(r),w=t.lens(M,r),P=p(-1),g=p(1);n.init=v,n.count=x,n.index=m,n.setIndex=y,n.viewIndex=h,n.present=M,n.setPresent=q,n.viewPresent=w,n.undo=P,n.undoCount=m,n.undoForget=function(n){return d(0,c(n.i,n.t),c(n.i,n.v),n.c)},n.redo=g,n.redoCount=function(n){return x(n)-1-n.i},n.redoForget=function(n){return d(n.i,s(n.i+1,n.t),s(n.i+1,n.v),n.c)},Object.defineProperty(n,"__esModule",{value:!0})});
